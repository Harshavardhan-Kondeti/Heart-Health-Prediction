{% extends "base.html" %}
{% block content %}
<section style="min-height:60vh; display:flex; align-items:center; justify-content:center;">
  <div style="position:relative; width:100%; max-width:480px;">
    <div style="position:absolute; inset:-20px; background:radial-gradient(1200px 300px at 10% -10%, rgba(69,224,167,0.12), transparent), radial-gradient(800px 300px at 110% 110%, rgba(66,133,244,0.12), transparent);
                filter: blur(6px); border-radius:18px; z-index:0;"></div>
    <article style="position:relative; z-index:1; border-radius:18px; padding:1.25rem 1.25rem 1rem; box-shadow:0 18px 60px rgba(0,0,0,0.10); background:linear-gradient(180deg, #111010, #040404);">
      <header style="text-align:center; margin-bottom:0.5rem;">
        <div style="display:inline-flex; align-items:center; justify-content:center; width:56px; height:56px; border-radius:50%; background:linear-gradient(135deg,#0f100f,#0f0f10); box-shadow:0 6px 20px rgba(0,0,0,0.08);">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 7h18M6 7v10a6 6 0 0 0 12 0V7" stroke="#2a6" stroke-width="1.6"/>
            <rect x="8" y="3" width="8" height="6" rx="2" stroke="#2a6" stroke-width="1.6"/>
          </svg>
        </div>
        <h2 style="margin:0.5rem 0 0;">Welcome back</h2>
        <p style="margin:0; color:#667; font-size:0.95rem;">Sign in to access your ECG dashboard</p>
      </header>

      {% if request.query_params.get('check_email') == '1' %}
      <p style="color:#0c5460; background:#d1ecf1; border:1px solid #bee5eb; padding:0.5rem 0.75rem; border-radius:10px;">Thanks for registering. Please check your email to verify your account.</p>
      {% endif %}
      {% if request.query_params.get('verify_required') == '1' %}
      <p style="color:#856404; background:#fff3cd; border:1px solid #ffeeba; padding:0.5rem 0.75rem; border-radius:10px;">Email verification required. Check your inbox for the verification link.</p>
      {% endif %}
      {% if request.query_params.get('verified') == '1' %}
      <p style="color:#1b5e20; background:#e8f5e9; border:1px solid #c8e6c9; padding:0.5rem 0.75rem; border-radius:10px;">Email verified successfully. You can now sign in.</p>
      {% endif %}
      {% if request.query_params.get('reset_sent') == '1' %}
      <p style="color:#155724; background:#d4edda; border:1px solid #c3e6cb; padding:0.5rem 0.75rem; border-radius:10px;">Password reset link sent to your email.</p>
      {% endif %}
      {% if request.query_params.get('reset_ok') == '1' %}
      <p style="color:#1b5e20; background:#e8f5e9; border:1px solid #c8e6c9; padding:0.5rem 0.75rem; border-radius:10px;">Password updated. Please sign in with your new password.</p>
      {% endif %}
      {% if request.query_params.get('error') == 'invalid' %}
      <p style="color:#c0392b; background:#131110; border:1px solid #0e0d0d; padding:0.5rem 0.75rem; border-radius:10px;">Invalid email or password. Please try again.</p>
      {% endif %}

      <form method="post" action="/auth/login" style="display:grid; gap:0.75rem;">
        <label>Email
          <input type="email" name="username" placeholder="email@example.com" required style="border-radius:10px;" />
        </label>
        <label>Password
          <input type="password" name="password" required style="border-radius:10px;" />
        </label>
        <input type="hidden" name="grant_type" value="password" />
        <button type="submit" style="border-radius:999px;">
          Sign in
        </button>
        <p style="text-align:center; margin:0.5rem 0 0;">
          No account? <a href="/auth/register">Create one</a>
          &nbsp;Â·&nbsp;
          <a href="/auth/forgot">Forgot password?</a>
        </p>
      </form>
    </article>
  </div>
</section>
{% endblock %}
